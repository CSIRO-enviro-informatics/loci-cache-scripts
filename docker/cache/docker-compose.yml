version: "3.7"

services:
    graphcache:
        restart: unless-stopped
        build:
            context: .
            dockerfile: Dockerfile
        environment: 
            - GRAPHDB_HOME
            - GRAPHDB_SOURCE
            - FORCE_REFRESH
            - S3_BUCKET
            - S3_REGION
            - S3_LINKSET_PATH
            - S3_DATASET_PATH
            - GDB_HEAP_SIZE=8g
        volumes:
            - "/tmp:/tmp"
            - "graphdb_data:${GRAPHDB_HOME}"
            - "data_cache:${GRAPHDB_SOURCE}"
        ports:
            - "80:7200"

volumes:
    graphdb_data:
    data_cache:
